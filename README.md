<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](http://doctoc.herokuapp.com/)*

- [danrw-rest-api](#danrw-rest-api)
    - [API prefix](#api-prefix)
    - [Ingest data](#ingest-data)
      - [Response](#response)
    - [Get status of specific ingest](#get-status-of-specific-ingest)
      - [Parameters](#parameters)
      - [Response](#response-1)
    - [Get list of all AIP](#get-list-of-all-aip)
      - [Response](#response-2)
    - [Order the dissemination of information](#order-the-dissemination-of-information)
      - [Parameters](#parameters-1)
      - [Response](#response-3)
    - [Get status of ordered dissemination of information](#get-status-of-ordered-dissemination-of-information)
      - [Parameters](#parameters-2)
      - [Response](#response-4)
    - [Disseminate information](#disseminate-information)
      - [Parameters](#parameters-3)
      - [Response](#response-5)
        - [On success](#on-success)
        - [On error](#on-error)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

danrw-rest-api
==============

A RESTful API to a DA-NRW (Digitales Archiv - Nordrhein-Westfalen) instance. The API intends to be conforming to the OAIS workflow. It has been tested using version "Oberntudorf 0.6.5-p1" of DA-NRW (see https://github.com/da-nrw).


### API prefix

```
/api/v1
```

### Ingest data

```
POST /ingest
```

The file to ingest needs to be POSTed using the Content-Type multipart/form-data which allows the uploading of binary files.

#### Response

```
Status: 200 OK
```

### Get status of specific ingest

```
GET /ingest/status
```

#### Parameters

| Name  | Type | Description |
| ----- | ---- | ----------- | 
| identifier  | string | The identifier of the ingested data generated by the DA-NRW (e.g. "1-20141028174"). |
| urn  | string  | The URN of the ingested data generated by the DA-NRW (e.g. "urn:nbn:de:danrw-1-20141028174"). |
| origName  | string | Original name of the ingested file without file prefix. |

#### Response

```
Status: 200 OK
```
```
{
    "result": [
        {
            "urn": "urn:nbn:de:danrw-1-20141028174",
            "contractor": "TEST",
            "origName": "20141028 Ingest Test 1",
            "identifier": "1-20141028174",
            "status": "in progress"
        }
    ]
}
```

### Get list of all AIP

```
GET /ingest/status
```

#### Response

```
Status: 200 OK
```
```
{
    "result": [
        {
            "status": "archived",
            "urn": "urn:nbn:de:danrw-1-20141028182",
            "contractor": "TEST",
            "origName": "20141028 Ingest Test 2",
            "packages": [
                "1"
            ]
        },
        {
            "status": "archived",
            "urn": "urn:nbn:de:danrw-1-20141016129",
            "contractor": "TEST",
            "origName": "20141016 Ingest Test 1",
            "packages": []
        },
        {
            "status": "archived",
            "urn": "urn:nbn:de:danrw-1-20141016129",
            "contractor": "TEST",
            "origName": "20141016 Ingest Test 1",
            "packages": [
                "1"
            ]
        },
        {
            "status": "archived",
            "urn": "urn:nbn:de:danrw-1-2014101581",
            "contractor": "TEST",
            "origName": "20141014 Ingest Test 1",
            "packages": []
        },
        {
            "status": "archived",
            "urn": "urn:nbn:de:danrw-1-20141028196",
            "contractor": "TEST",
            "origName": "20141028 Ingest Test 3",
            "packages": []
        },
        {
            "status": "archived",
            "urn": "urn:nbn:de:danrw-1-20141028196",
            "contractor": "TEST",
            "origName": "20141028 Ingest Test 3",
            "packages": [
                "1"
            ]
        }
    ]
}
```

### Order the dissemination of information

```
GET /order
```

#### Parameters

| Name  | Type | Description |
| ----- | ---- | ----------- | 
| identifier  | string | The identifier of the information to be ordered (e.g. "1-20141028174"). |

#### Response

```
Status: 200 OK
```
```
{
  "success": true,
  "msg": "Objekt urn:nbn:de:danrw-1-20141028174 erfolgreich angefordert."
}
```

### Get status of ordered dissemination of information

```
GET /order/status
```

#### Parameters

| Name  | Type | Description |
| ----- | ---- | ----------- | 
| identifier  | string | The identifier of the information whose dissemination has been ordered (e.g. "1-20141028174"). |

#### Response

```
Status: 200 OK
```
```
[
    {
        "urn": "urn:nbn:de:danrw-1-20141016110",
        "contractor": "TEST",
        "origName": "20141016 Ingest Test 3",
        "identifier": "1-20141016110",
        "status": "in progress waiting : (950)",
        "statusCode": "950"
    }
]
```

### Disseminate information
Binary download of information whose dissemination was previously ordered. The downloaed file is a gzipped tar archive (.tgz). The filename is given in the response header parameter 'Content-Disposition'.

```
GET /disseminate
```

#### Parameters

| Name  | Type | Description |
| ----- | ---- | ----------- | 
| identifier  | string | The identifier of the information whose dissemination has been ordered (e.g. "1-20141028174"). |

#### Response

##### On success
```
Status: 200 OK
```

##### On error
```
Status: 404 Not Found
```
